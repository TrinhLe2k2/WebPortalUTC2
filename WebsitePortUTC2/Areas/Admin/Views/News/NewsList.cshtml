
@{
    ViewData["Title"] = "NewsList";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">Danh Sách Tin Tức</h1>
    <p class="mb-4">
        DataTables is a third party plugin that is used to generate the demo table below.
        For more information about DataTables, please visit the <a target="_blank"
                                                                   href="https://datatables.net">official DataTables documentation</a>.
    </p>

    <!-- DataTales Example -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">UTC2 Tin Tức & Thông Báo</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>id</th>
                            <th>Name</th>
                            <th>description</th>
                            <th>Category</th>
                            <th>viewNumber</th>
                            <th>publishedAt</th>
                            <th>isHot</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th>id</th>
                            <th>Name</th>
                            <th>description</th>
                            <th>Category</th>
                            <th>viewNumber</th>
                            <th>publishedAt</th>
                            <th>isHot</th>
                            <th>Action</th>
                        </tr>
                    </tfoot>
                    <tbody id="DataNews">
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>Tiger Nixon</td>
                            <td>System Architect</td>
                            <td>Edinburgh</td>
                            <td>61</td>
                            <td>2011/04/25</td>
                            <td>$320,800</td>
                        </tr>
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>Michael Bruce</td>
                            <td>Javascript Developer</td>
                            <td>Singapore</td>
                            <td>29</td>
                            <td>2011/06/27</td>
                            <td>$183,000</td>
                            <td>$183,000</td>
                            <td><div><a href="" class="btn btn-success">Thêm</a> | <a href="" class="btn btn-warning">Sửa</a> | <a href="" class="btn btn-danger">Xóa</a></div></td>
                        </tr>
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>Donna Snider</td>
                            <td>Customer Support</td>
                            <td>New York</td>
                            <td>27</td>
                            <td>2011/01/25</td>
                            <td>$112,000</td>
                            <td><div><a href="" class="btn btn-success">Thêm</a> | <a href="" class="btn btn-warning">Sửa</a> | <a href="" class="btn btn-danger">Xóa</a></div></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>

@section Scripts
{
    <script>
        GetAPINewsList();
        function GetAPINewsList(){
            var url = 'https://api-intern-test.h2aits.com/News/GetListByStatus?status=1';
            fetch(url, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
            })
                .then(response => response.json())
                .then(object => {
                    var html = '';
                    object.data.forEach(element => {
                        html += `
                                        <tr>
                                            <td><p>${element.id}</p></td>
                                            <td><p>${element.name}</p></td>
                                            <td><p>${element.description}</p></td>
                                            <td>${element.newsCategoryObj.name}</td>
                                            <td>${element.viewNumber}</td>
                                            <td>${element.publishedAt}</td>
                                            <td>${element.isHot}</td>
                                            <td><div><a href="/Admin/News/Edit/${element.id}" class="btn btn-warning">Sửa</a><a href="" class="btn btn-danger">Xóa</a></div></td>
                                        </tr>
                                `;
                    });

                    // innerHTML
                    document.getElementById('DataNews').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error:', error);
                })
                .finally(() => {
                    document.querySelectorAll('#DataNews p').forEach(item => {
                        item.classList.add('limit-tag-p');
                    });
                });
        }
    </script>
}